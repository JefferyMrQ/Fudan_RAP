
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../sqls/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.2.5">
    
    
      
        <title>API - My Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0e669242.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#frameworksql" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="My Docs" class="md-header__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              API
            
          </span>
        </div>
      </div>
    </div>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="My Docs" class="md-nav__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../framework%20designing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    框架说明
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../sqls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SQLs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    API
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    API
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#frameworksql" class="md-nav__link">
    一、framework解析器(SQL生成器)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3" class="md-nav__link">
    structural_sql_generator_v3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.GeneratorTools" class="md-nav__link">
    GeneratorTools
  </a>
  
    <nav class="md-nav" aria-label="GeneratorTools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.GeneratorTools.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.GeneratorTools.gen_cond_time_range" class="md-nav__link">
    gen_cond_time_range()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.GeneratorTools.parse_date" class="md-nav__link">
    parse_date()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator" class="md-nav__link">
    SQLGenerator
  </a>
  
    <nav class="md-nav" aria-label="SQLGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.integrating_sql" class="md-nav__link">
    integrating_sql()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_A" class="md-nav__link">
    parse_bo_A()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_A_prop" class="md-nav__link">
    parse_bo_A_prop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_A_prop_val" class="md-nav__link">
    parse_bo_A_prop_val()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_B" class="md-nav__link">
    parse_bo_B()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_B_prop" class="md-nav__link">
    parse_bo_B_prop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_B_prop_val" class="md-nav__link">
    parse_bo_B_prop_val()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_event" class="md-nav__link">
    parse_event()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_expression" class="md-nav__link">
    parse_expression()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_framework" class="md-nav__link">
    parse_framework()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_metric" class="md-nav__link">
    parse_metric()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_time" class="md-nav__link">
    parse_time()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGroupByWidgetGenerator" class="md-nav__link">
    SQLGroupByWidgetGenerator
  </a>
  
    <nav class="md-nav" aria-label="SQLGroupByWidgetGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGroupByWidgetGenerator.gen_groupby_field" class="md-nav__link">
    gen_groupby_field()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLHavingWidgetGenerator" class="md-nav__link">
    SQLHavingWidgetGenerator
  </a>
  
    <nav class="md-nav" aria-label="SQLHavingWidgetGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLHavingWidgetGenerator.gen_having_is_not_none" class="md-nav__link">
    gen_having_is_not_none()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator" class="md-nav__link">
    SQLSelectWidgetGenerator
  </a>
  
    <nav class="md-nav" aria-label="SQLSelectWidgetGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field" class="md-nav__link">
    gen_select_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_avg" class="md-nav__link">
    gen_select_field_avg()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_case_when" class="md-nav__link">
    gen_select_field_case_when()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_count_distinct" class="md-nav__link">
    gen_select_field_count_distinct()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format" class="md-nav__link">
    gen_select_field_month_format()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format_lm" class="md-nav__link">
    gen_select_field_month_format_lm()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format_lm_ly" class="md-nav__link">
    gen_select_field_month_format_lm_ly()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format_ly" class="md-nav__link">
    gen_select_field_month_format_ly()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_sum" class="md-nav__link">
    gen_select_field_sum()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_sum_avg" class="md-nav__link">
    gen_select_field_sum_avg()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_time_yoy" class="md-nav__link">
    gen_select_field_time_yoy()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator" class="md-nav__link">
    SQLWhereWidgetGenerator
  </a>
  
    <nav class="md-nav" aria-label="SQLWhereWidgetGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_existing" class="md-nav__link">
    gen_where_cond_existing()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_lost" class="md-nav__link">
    gen_where_cond_lost()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_new" class="md-nav__link">
    gen_where_cond_new()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_time_range" class="md-nav__link">
    gen_where_cond_time_range()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_dim_field_val" class="md-nav__link">
    gen_where_dim_field_val()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.judge_return_or_append" class="md-nav__link">
    judge_return_or_append()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    二、信息获取页面
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management_v3" class="md-nav__link">
    management_v3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph" class="md-nav__link">
    BuildOneParagraph
  </a>
  
    <nav class="md-nav" aria-label="BuildOneParagraph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.build_btn_click" class="md-nav__link">
    build_btn_click()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.display_options" class="md-nav__link">
    display_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.save_fetch_params" class="md-nav__link">
    save_fetch_params()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.select_group" class="md-nav__link">
    select_group()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_avg_spend_per_cust_analysis" class="md-nav__link">
    setup_avg_spend_per_cust_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_cust_dev_analysis" class="md-nav__link">
    setup_cust_dev_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_cust_dim_analysis" class="md-nav__link">
    setup_cust_dim_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_income_analysis" class="md-nav__link">
    setup_income_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_income_trend_analysis" class="md-nav__link">
    setup_income_trend_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_key_cust_dev_analysis" class="md-nav__link">
    setup_key_cust_dev_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_key_cust_income_analysis" class="md-nav__link">
    setup_key_cust_income_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_key_cust_plan_achieve_analysis" class="md-nav__link">
    setup_key_cust_plan_achieve_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_key_cust_ranking_analysis" class="md-nav__link">
    setup_key_cust_ranking_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_key_cust_trend_analysis" class="md-nav__link">
    setup_key_cust_trend_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_num_cust_analysis" class="md-nav__link">
    setup_num_cust_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_plan_achieve_analysis" class="md-nav__link">
    setup_plan_achieve_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_ranking_analysis" class="md-nav__link">
    setup_ranking_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.show_build_btn" class="md-nav__link">
    show_build_btn()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management_v3.del_btn_click" class="md-nav__link">
    del_btn_click()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management_v3.fetch" class="md-nav__link">
    fetch()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management_v3.increase_rows" class="md-nav__link">
    increase_rows()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    三、图文展示页面
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#display" class="md-nav__link">
    display
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#display.Display" class="md-nav__link">
    Display
  </a>
  
    <nav class="md-nav" aria-label="Display">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#display.Display.format_metric" class="md-nav__link">
    format_metric()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display.Display.judge_cont_num" class="md-nav__link">
    judge_cont_num()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display.Display.parse_date" class="md-nav__link">
    parse_date()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display.Display.show_cont_sign_metric" class="md-nav__link">
    show_cont_sign_metric()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#display.parse_coordinate" class="md-nav__link">
    parse_coordinate()
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#frameworksql" class="md-nav__link">
    一、framework解析器(SQL生成器)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3" class="md-nav__link">
    structural_sql_generator_v3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.GeneratorTools" class="md-nav__link">
    GeneratorTools
  </a>
  
    <nav class="md-nav" aria-label="GeneratorTools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.GeneratorTools.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.GeneratorTools.gen_cond_time_range" class="md-nav__link">
    gen_cond_time_range()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.GeneratorTools.parse_date" class="md-nav__link">
    parse_date()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator" class="md-nav__link">
    SQLGenerator
  </a>
  
    <nav class="md-nav" aria-label="SQLGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.__init__" class="md-nav__link">
    __init__()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.integrating_sql" class="md-nav__link">
    integrating_sql()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_A" class="md-nav__link">
    parse_bo_A()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_A_prop" class="md-nav__link">
    parse_bo_A_prop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_A_prop_val" class="md-nav__link">
    parse_bo_A_prop_val()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_B" class="md-nav__link">
    parse_bo_B()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_B_prop" class="md-nav__link">
    parse_bo_B_prop()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_bo_B_prop_val" class="md-nav__link">
    parse_bo_B_prop_val()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_event" class="md-nav__link">
    parse_event()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_expression" class="md-nav__link">
    parse_expression()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_framework" class="md-nav__link">
    parse_framework()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_metric" class="md-nav__link">
    parse_metric()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGenerator.parse_time" class="md-nav__link">
    parse_time()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGroupByWidgetGenerator" class="md-nav__link">
    SQLGroupByWidgetGenerator
  </a>
  
    <nav class="md-nav" aria-label="SQLGroupByWidgetGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLGroupByWidgetGenerator.gen_groupby_field" class="md-nav__link">
    gen_groupby_field()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLHavingWidgetGenerator" class="md-nav__link">
    SQLHavingWidgetGenerator
  </a>
  
    <nav class="md-nav" aria-label="SQLHavingWidgetGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLHavingWidgetGenerator.gen_having_is_not_none" class="md-nav__link">
    gen_having_is_not_none()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator" class="md-nav__link">
    SQLSelectWidgetGenerator
  </a>
  
    <nav class="md-nav" aria-label="SQLSelectWidgetGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field" class="md-nav__link">
    gen_select_field()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_avg" class="md-nav__link">
    gen_select_field_avg()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_case_when" class="md-nav__link">
    gen_select_field_case_when()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_count_distinct" class="md-nav__link">
    gen_select_field_count_distinct()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format" class="md-nav__link">
    gen_select_field_month_format()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format_lm" class="md-nav__link">
    gen_select_field_month_format_lm()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format_lm_ly" class="md-nav__link">
    gen_select_field_month_format_lm_ly()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format_ly" class="md-nav__link">
    gen_select_field_month_format_ly()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_sum" class="md-nav__link">
    gen_select_field_sum()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_sum_avg" class="md-nav__link">
    gen_select_field_sum_avg()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_time_yoy" class="md-nav__link">
    gen_select_field_time_yoy()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator" class="md-nav__link">
    SQLWhereWidgetGenerator
  </a>
  
    <nav class="md-nav" aria-label="SQLWhereWidgetGenerator">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_existing" class="md-nav__link">
    gen_where_cond_existing()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_lost" class="md-nav__link">
    gen_where_cond_lost()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_new" class="md-nav__link">
    gen_where_cond_new()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_time_range" class="md-nav__link">
    gen_where_cond_time_range()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_dim_field_val" class="md-nav__link">
    gen_where_dim_field_val()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structural_sql_generator_v3.judge_return_or_append" class="md-nav__link">
    judge_return_or_append()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    二、信息获取页面
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management_v3" class="md-nav__link">
    management_v3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph" class="md-nav__link">
    BuildOneParagraph
  </a>
  
    <nav class="md-nav" aria-label="BuildOneParagraph">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.build_btn_click" class="md-nav__link">
    build_btn_click()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.display_options" class="md-nav__link">
    display_options()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.save_fetch_params" class="md-nav__link">
    save_fetch_params()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.select_group" class="md-nav__link">
    select_group()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_avg_spend_per_cust_analysis" class="md-nav__link">
    setup_avg_spend_per_cust_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_cust_dev_analysis" class="md-nav__link">
    setup_cust_dev_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_cust_dim_analysis" class="md-nav__link">
    setup_cust_dim_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_income_analysis" class="md-nav__link">
    setup_income_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_income_trend_analysis" class="md-nav__link">
    setup_income_trend_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_key_cust_dev_analysis" class="md-nav__link">
    setup_key_cust_dev_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_key_cust_income_analysis" class="md-nav__link">
    setup_key_cust_income_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_key_cust_plan_achieve_analysis" class="md-nav__link">
    setup_key_cust_plan_achieve_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_key_cust_ranking_analysis" class="md-nav__link">
    setup_key_cust_ranking_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_key_cust_trend_analysis" class="md-nav__link">
    setup_key_cust_trend_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_num_cust_analysis" class="md-nav__link">
    setup_num_cust_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_plan_achieve_analysis" class="md-nav__link">
    setup_plan_achieve_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.setup_ranking_analysis" class="md-nav__link">
    setup_ranking_analysis()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#management_v3.BuildOneParagraph.show_build_btn" class="md-nav__link">
    show_build_btn()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management_v3.del_btn_click" class="md-nav__link">
    del_btn_click()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management_v3.fetch" class="md-nav__link">
    fetch()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#management_v3.increase_rows" class="md-nav__link">
    increase_rows()
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    三、图文展示页面
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#display" class="md-nav__link">
    display
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#display.Display" class="md-nav__link">
    Display
  </a>
  
    <nav class="md-nav" aria-label="Display">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#display.Display.format_metric" class="md-nav__link">
    format_metric()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display.Display.judge_cont_num" class="md-nav__link">
    judge_cont_num()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display.Display.parse_date" class="md-nav__link">
    parse_date()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#display.Display.show_cont_sign_metric" class="md-nav__link">
    show_cont_sign_metric()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#display.parse_coordinate" class="md-nav__link">
    parse_coordinate()
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>API</h1>

<h2 id="frameworksql">一、framework解析器(SQL生成器)</h2>


<div class="doc doc-object doc-module">



<a id="structural_sql_generator_v3"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="structural_sql_generator_v3.GeneratorTools" class="doc doc-heading">
          <code>GeneratorTools</code>


</h2>


  <div class="doc doc-contents ">



  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.GeneratorTools.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">metric</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">sub_anlys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dim_A</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dim_val_A</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dim_B</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dim_val_B</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">desig_cust</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>:param table_name: 表名
:param group: 组别  例如: '收入分析'、'客户数分析'
:param metric: 指标  例如: '（按月）收入'、'（按月）存量客户数'
:param date: 日期 例如: datetime.date(2021, 7, 1)
:param sub_anlys: 子分析 对于部分analysis group起作用，例如“客群分维度分析”中的“收入分析”就是一个sub_anlys
:param dim_A: 业务对象A维度（替换待定属性） 包含单一维度和双维度情况，其中双维度中两个维度之间用“-”连接，例如“省份-行业”
:param dim_val_A: 业务对象A维度值（替换待定值），在双维度情况下，两个维度值之间用“-”连接，例如“上海-交通物流行业”
:param dim_B: 业务对象B维度（替换待定属性） 包含单一维度和双维度情况，其中双维度中两个维度之间用“-”连接，例如“客户等级-产品名”
:param dim_val_B: 业务对象B维度值（替换待定值），在双维度情况下，两个维度值之间用“-”连接，例如“0-某产品”
:param k: 过去K个月
:param desig_cust: 指定客户，为了'关键客群排名分析'中'客户等级'属性需要指定其'待定值'</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.GeneratorTools.gen_cond_time_range" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_cond_time_range</span><span class="p">(</span><span class="n">time_cond_type</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>有娱时间条件比较特殊, 一半只有一个固定的时间字段, 并且查询的时间种类变化繁多
因此将其单独拿出来处理, 简化并节省了下面select、where、other的代码, 此外还便于维护
:param time_cond_type: 时间条件的类型, 例如'某月', '某月的上月', '本月', '上月', '今年', '去年', '过去K个月'等
:param date: 日期 例如: datetime.date(2021, 7, 1)
:return: 时间条件文本</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.GeneratorTools.parse_date" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>parse a date to a sequence of strings, containing the start date and the end date of the month</p>

  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="structural_sql_generator_v3.SQLGenerator" class="doc doc-heading">
          <code>SQLGenerator</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="structural_sql_generator_v3.SQLSelectWidgetGenerator" href="#structural_sql_generator_v3.SQLSelectWidgetGenerator">SQLSelectWidgetGenerator</a></code>, <code><a class="autorefs autorefs-internal" title="structural_sql_generator_v3.SQLWhereWidgetGenerator" href="#structural_sql_generator_v3.SQLWhereWidgetGenerator">SQLWhereWidgetGenerator</a></code>, <code><a class="autorefs autorefs-internal" title="structural_sql_generator_v3.SQLGroupByWidgetGenerator" href="#structural_sql_generator_v3.SQLGroupByWidgetGenerator">SQLGroupByWidgetGenerator</a></code>, <code><a class="autorefs autorefs-internal" title="structural_sql_generator_v3.SQLHavingWidgetGenerator" href="#structural_sql_generator_v3.SQLHavingWidgetGenerator">SQLHavingWidgetGenerator</a></code></p>

  
      <p>解析metric得到"以事件为导向的框架", EOF(Event-Oriented Framework)
EOF: [业务对象A的属性, 业务对象B的属性, 事件, 时间范围, 统计方法]</p>


  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.__init__" class="doc doc-heading">
          <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">table_name</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">metric</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">sub_anlys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dim_A</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dim_val_A</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dim_B</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dim_val_B</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">desig_cust</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>:param table_name: 表名
:param group: 组别  例如: '收入分析'、'客户数分析'
:param metric: 指标  例如: '（按月）收入'、'（按月）存量客户数'
:param date: 日期 例如: datetime.date(2021, 7, 1)
:param sub_anlys: 子分析 对于部分analysis group起作用，例如“客群分维度分析”中的“收入分析”就是一个sub_anlys
:param dim_A: 业务对象A维度（替换待定属性） 包含单一维度和双维度情况，其中双维度中两个维度之间用“-”连接，例如“省份-行业”
:param dim_val_A: 业务对象A维度值（替换待定值），在双维度情况下，两个维度值之间用“-”连接，例如“上海-交通物流行业”
:param dim_B: 业务对象B维度（替换待定属性） 包含单一维度和双维度情况，其中双维度中两个维度之间用“-”连接，例如“客户等级-产品名”
:param dim_val_B: 业务对象B维度值（替换待定值），在双维度情况下，两个维度值之间用“-”连接，例如“0-某产品”
:param k: 过去K个月
:param desig_cust: 指定客户，为了'关键客群排名分析'中'客户等级'属性需要指定其'待定值'</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.integrating_sql" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">integrating_sql</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>整合sql</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_bo_A" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_bo_A</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析业务对象A</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_bo_A_prop" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_bo_A_prop</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析业务对象A属性
将bo_A_prop解析成A_field，结合输入参数dim_A从格式化文本解析成具体的属性列表
e.g. 客户id+客户等级+/待定属性 -&gt; [客户id, 客户等级, 待定属性] -&gt; [客户id, 客户等级, 省份]</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_bo_A_prop_val" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_bo_A_prop_val</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析业务对象A属性值
新增+0+/待定值 -&gt; [新增, 0, 待定值]</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_bo_B" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_bo_B</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析业务对象B</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_bo_B_prop" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_bo_B_prop</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析业务对象B属性</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_bo_B_prop_val" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_bo_B_prop_val</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析业务对象B属性值</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_event" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_event</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析事件（弃用）</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_expression" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_expression</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析统计方法</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_framework" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_framework</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析EOF，生成sql参数</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_metric" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_metric</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析metric得到EOF</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGenerator.parse_time" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_time</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>解析时间</p>

  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="structural_sql_generator_v3.SQLGroupByWidgetGenerator" class="doc doc-heading">
          <code>SQLGroupByWidgetGenerator</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="structural_sql_generator_v3.GeneratorTools" href="#structural_sql_generator_v3.GeneratorTools">GeneratorTools</a></code></p>

  
      <p>生成SQL语句中的groupby部分</p>


  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLGroupByWidgetGenerator.gen_groupby_field" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_groupby_field</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成group by语句
:param field: 字段名
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="structural_sql_generator_v3.SQLHavingWidgetGenerator" class="doc doc-heading">
          <code>SQLHavingWidgetGenerator</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="structural_sql_generator_v3.GeneratorTools" href="#structural_sql_generator_v3.GeneratorTools">GeneratorTools</a></code></p>

  
      <p>生成SQL语句中的having部分</p>


  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLHavingWidgetGenerator.gen_having_is_not_none" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_having_is_not_none</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成group by语句</p>

  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="structural_sql_generator_v3.SQLSelectWidgetGenerator" class="doc doc-heading">
          <code>SQLSelectWidgetGenerator</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="structural_sql_generator_v3.GeneratorTools" href="#structural_sql_generator_v3.GeneratorTools">GeneratorTools</a></code></p>

  
      <p>生成SQL语句中的select部分</p>


  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">alias</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成select field语句
:param field: 字段名
:param alias: 字段别名
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_avg" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field_avg</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成avg(field)语句
:param field: 字段名
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_case_when" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field_case_when</span><span class="p">(</span><span class="n">val_lst</span><span class="p">,</span> <span class="n">case_when_field</span><span class="p">,</span> <span class="n">case_when_alias</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成case when语句（这里只设计了某一字段等于某一值的when语句，如果需要&gt;=，&lt;=，可以做对应的修改）
:param val_lst: case when的值列表
:param case_when_field: case when，并且要group by的字段
:param case_when_alias: case when字段别名
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_count_distinct" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field_count_distinct</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成count(distinct select_field)语句
:param field: 字段名
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field_month_format</span><span class="p">(</span><span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成月份日期字段
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format_lm" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field_month_format_lm</span><span class="p">(</span><span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成月份日期字段+1个月
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format_lm_ly" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field_month_format_lm_ly</span><span class="p">(</span><span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成月份日期字段+1个月+1年
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_month_format_ly" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field_month_format_ly</span><span class="p">(</span><span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成月份日期字段+1年
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_sum" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field_sum</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成sum(select_field)语句
:param field: 字段名
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_sum_avg" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field_sum_avg</span><span class="p">(</span><span class="n">groupby_main_field</span><span class="p">,</span> <span class="n">groupby_dim_field</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">special_toggle</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成sum+avg语句
:param field: 字段名
:param groupby_main_field: 主字段, 在内部group by
:param groupby_dim_field: 维度字段, 在内外部都要group by
:param special_toggle: 特殊开关，针对'关键客群收入分析'-'关键客群vs非关键客群：（按月）客单价'的情况</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLSelectWidgetGenerator.gen_select_field_time_yoy" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_select_field_time_yoy</span><span class="p">(</span><span class="n">time_cond_type</span><span class="p">,</span> <span class="n">date</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>只有一个时间段的'同比', 例如'某月', '今年'
:param time_cond_type: 时间条件的类型, 例如'某月', '某月的上月', '本月', '上月', '今年', '去年ytd', '过去K个月'等
:param date: 日期 例如: datetime.date(2021, 7, 1)
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>



  </div>

  </div>

</div>

<div class="doc doc-object doc-class">




<h2 id="structural_sql_generator_v3.SQLWhereWidgetGenerator" class="doc doc-heading">
          <code>SQLWhereWidgetGenerator</code>


</h2>


  <div class="doc doc-contents ">
          <p class="doc doc-class-bases">
            Bases: <code><a class="autorefs autorefs-internal" title="structural_sql_generator_v3.GeneratorTools" href="#structural_sql_generator_v3.GeneratorTools">GeneratorTools</a></code></p>

  
      <p>生成SQL语句中的where部分</p>


  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_existing" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_where_cond_existing</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">time_cond_type</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成'存量'where条件
:param field: 字段
:param time_cond_type: 时间条件的类型, 例如'某月', '某月的上月', '本月', '上月', '今年', '去年ytd', '过去K个月'等
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_lost" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_where_cond_lost</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">time_cond_type</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成'流失'where条件
:param field: 字段
:param time_cond_type: 时间条件的类型, 例如'某月', '某月的上月', '本月', '上月', '今年', '去年ytd', '过去K个月'等
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_new" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_where_cond_new</span><span class="p">(</span><span class="n">field</span><span class="p">,</span> <span class="n">time_cond_type</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成'新增'where条件
:param field: 字段
:param time_cond_type: 时间条件的类型, 例如'某月', '某月的上月', '本月', '上月', '今年', '去年ytd', '过去K个月'等
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_cond_time_range" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_where_cond_time_range</span><span class="p">(</span><span class="n">time_cond_type</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成时间范围where条件, 返回语句或添加在where_conds列表中
:param time_cond_type: 时间条件的类型, 例如'某月', '某月的上月', '本月', '上月', '今年', '去年ytd', '过去K个月'等
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加
:return: 时间范围where条件文本</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="structural_sql_generator_v3.SQLWhereWidgetGenerator.gen_where_dim_field_val" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">gen_where_dim_field_val</span><span class="p">(</span><span class="n">dim_field</span><span class="p">,</span> <span class="n">dim_val</span><span class="p">,</span> <span class="n">return_or_append</span><span class="o">=</span><span class="s1">&#39;a&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>生成'{dim_field} = {dim_val}'where条件
:param dim_field: 属性字段（维度字段）
:param dim_val: 属性值（维度值）
:param return_or_append: 值为'r'，则返回； 值为'a'，则追加</p>

  </div>

</div>



  </div>

  </div>

</div>



<div class="doc doc-object doc-function">




<h2 id="structural_sql_generator_v3.judge_return_or_append" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">judge_return_or_append</span><span class="p">(</span><span class="n">func</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>decorator, 判断返回还是追加</p>

  </div>

</div>



  </div>

  </div>

</div><h2 id="_1">二、信息获取页面</h2>


<div class="doc doc-object doc-module">



<a id="management_v3"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="management_v3.BuildOneParagraph" class="doc doc-heading">
          <code>BuildOneParagraph</code>


</h2>


  <div class="doc doc-contents ">



  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.build_btn_click" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">build_btn_click</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">desc</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>callback of build button, add a new key-value pair to records</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.display_options" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">display_options</span><span class="p">(</span><span class="n">group</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>display customization options according to the chosen group</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.save_fetch_params" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">save_fetch_params</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>save fetch params to session state
:param group: the group of the paragraph
:param params: the params of the paragraph</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.select_group" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">select_group</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>select one group</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_avg_spend_per_cust_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_avg_spend_per_cust_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>客单价分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_cust_dev_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_cust_dev_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>客户发展分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_cust_dim_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_cust_dim_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>客群分维度分析
:return: sub_anlys 子分析, metric 指标</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_income_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_income_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>收入分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_income_trend_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_income_trend_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>收入趋势分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_key_cust_dev_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_key_cust_dev_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>关键客群发展分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_key_cust_income_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_key_cust_income_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>关键客群收入分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_key_cust_plan_achieve_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_key_cust_plan_achieve_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>关键客群计划达成分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_key_cust_ranking_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_key_cust_ranking_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>关键客群排名分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_key_cust_trend_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_key_cust_trend_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>关键客群趋势分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_num_cust_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_num_cust_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>客户数分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_plan_achieve_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_plan_achieve_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>计划达成分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.setup_ranking_analysis" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">setup_ranking_analysis</span><span class="p">()</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>排名分析</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="management_v3.BuildOneParagraph.show_build_btn" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">show_build_btn</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">group</span><span class="p">,</span> <span class="n">desc</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>show build button</p>

  </div>

</div>



  </div>

  </div>

</div>



<div class="doc doc-object doc-function">




<h2 id="management_v3.del_btn_click" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">del_btn_click</span><span class="p">(</span><span class="n">index</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>callback of delete button, delete the key-value pair from records</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="management_v3.fetch" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">fetch</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">gp</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>fetch data
:param index: index of the record
:param gp: group and params of the record</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h2 id="management_v3.increase_rows" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">increase_rows</span><span class="p">()</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>callback for increasing one row for display</p>

  </div>

</div>



  </div>

  </div>

</div><h2 id="_2">三、图文展示页面</h2>


<div class="doc doc-object doc-module">



<a id="display"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">








<div class="doc doc-object doc-class">




<h2 id="display.Display" class="doc doc-heading">
          <code>Display</code>


</h2>


  <div class="doc doc-contents ">



  

  <div class="doc doc-children">










<div class="doc doc-object doc-function">




<h3 id="display.Display.format_metric" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">format_metric</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="s1">&#39;亿元&#39;</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>部分指标的格式化，目前转化单位为亿元（默认原数据单位为万元），保留两位小数</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="display.Display.judge_cont_num" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">judge_cont_num</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>判断连续为正（负）的月份数
:param lst: 确保是按照日期升序排列的数值list
:return: 连续为正（负）的月份数，正负标识</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="display.Display.parse_date" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>parse date to lists of formatted string
if k is None, return month of last year and this year for yoy calculation
else return k months ago and this month for trend calculation</p>

  </div>

</div>


<div class="doc doc-object doc-function">




<h3 id="display.Display.show_cont_sign_metric" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">show_cont_sign_metric</span><span class="p">(</span><span class="n">cont_num</span><span class="p">,</span> <span class="n">sign</span><span class="p">,</span> <span class="n">dim</span><span class="p">,</span> <span class="n">dim_val</span><span class="p">,</span> <span class="n">metric</span><span class="p">)</span></code>

</h3>


  <div class="doc doc-contents ">
  
      <p>显示连续为正（负）的月份数的指标
:param cont_num: 连续为正（负）的月份数
:param sign: 正、负
:param dim: 维度中文名，如'省份'、'客户类型'
:param dim_val: 维度值，如'北京'、'企业'
:param metric: 指标名</p>

  </div>

</div>



  </div>

  </div>

</div>



<div class="doc doc-object doc-function">




<h2 id="display.parse_coordinate" class="doc doc-heading">
          <code class="highlight language-python"><span class="n">parse_coordinate</span><span class="p">(</span><span class="n">coordinate</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span></code>

</h2>


  <div class="doc doc-contents ">
  
      <p>parse coordinate to index, group, metric
:param coordinate: the coordinate of the paragraph
:return: index, group, metric</p>

  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.78eede0e.min.js"></script>
      
    
  </body>
</html>